\documentclass[../thesis.tex]{subfiles}

\ifSubfilesClassLoaded{
  \externaldocument{../build/2-preliminaries}%
  \externaldocument{../build/3-logics}%
}

\begin{document}
\chapter{Type Theories}

\section{Comprehension Categories and Categories with Attributes}
We begin by constructing an finite limit logic for comprehension categories. Recall that a comprehension category consists of
commutative triangle in $\Cat$
\[\begin{codi}[hexagonal=horizontal side 6em angle 45] 
  \obj{\cU &   \cC^\to \\
           & \cC \\};
  \mor  cU \chi:-> (cC ^to) \cod:-> cC;
  \mor[swap] cU u:-> cC;
\end{codi}\]
where $u: \cU \to \cC$ is a fibration. Note that all of this data is immediately describable as a finite limit logic; from example
\cref{ex:fib}, we see that we can ask $\cU$ to be a fibration, and similarly that $\cC^\to$ is the arrow object of $\cC$. More
formally, we let $\Comp$ be the $\cF$-theory generated by the finite limit $\cF$-sketch $(\bC, \cS)$ with objects,
morphisms and 2-cells in the diagrams
\begin{mathpar}
  \hspace*{-2.5em}\begin{codi}[hexagonal=horizontal side 7em angle 50] 
    \obj{\cU & \cC^\to \\ & \cC \\};
    \mor  cU \chi:â‰ˆ> (cC ^to) \cod_\cC:-> cC;
    \mor[swap] cU u:-> cC;
  \end{codi}
  \and
  \begin{codi}
    \obj{\cU^\to \\ \cU\\ };
    \mor[swap]:[bend right=36mu] (cU ^to) \dom_\cU:-> cU;
    \mor :[bend left=36mu] * \cod_\cU:-> *;
    \mor (dom _cU) \alpha_\cU:-2> (cod _cU);
  \end{codi}
  \and
  \begin{codi}
    \obj{\cC^\to \\ \cC\\ };
    \mor[swap]:[bend right=36mu] (cC ^to) \dom_\cC:-> cC;
    \mor :[bend left=36mu] * \cod_\cC:-> *;
    \mor (dom _cC) \alpha_\cC:-2> (cod _cC);
  \end{codi}
  \and
  \begin{codi} 
    \obj{\cC \comma u & \cU \\ |(cC1)| \cC & |(cC2)| \cC \\};
    \mor (cC comma u) \cod_\cC^u:-> cU u:-> cC2;
    \mor[swap] * \dom_\cC^u:-> cC1 1_\cC:-> *;
    \mor cC1 \alpha_\cC^u:-2> cU;
  \end{codi}
  \and
  \begin{codi}[hexagonal=horizontal side 9em angle 45] 
    \obj{|(cU1)| \cU^\to & |(cU2)| \cU^\to \\ & \cC \comma u \\};
    \mor (cU1) ["1_\cU",name=id cU]:equal (cU2);
    \mor[swap] * t:rightsquigarrow (cC comma u) r:rightsquigarrow *;
    \mor[] (id cU) \eta_\cU:[-2>,slide=0.3em, shorten=0.4em] (cC comma u);
  \end{codi}
\end{mathpar}
subject to the equations
\begin{mathpar}
  tr = 1_{\cC \comma u} \and
  \dom^u_\cC t = p \dom_\cU \and
  \cod^u_\cC t = \cod_\cU \and
  \alpha^u_\cC t = p\alpha_\cU \and
  u = \cod_\cC \chi \and
  t\eta = 1_t \and
  \eta r = 1_r
\end{mathpar}
and has as cones those making $\cU^\to$ and $\cC^\to$ cotensors with the arrow category $2$ and $\cC \comma
u$ the comma object of $1_\cC$ and $u$.

A model for $\Comp$ in $\Cat^-$ is exactly a (cloven) comprehension category, a tight morphism of models is a strict
homomorphism of comprehension categories, and a loose morphism is a pseudo homomorphism of comprehension categories.

If we further require $\eta_\cU$ to be identity, then $u$ becomes a discrete fibration. The models if this restricted
theory are so-called categories with attributes, those comprehension categories whose fibration of types are discrete.
Therefore we will denote the theory by $\Attr$.

\section{Natural Models}
Similarly to comprehension categories, natural models are defined as certain fibrations over a base category.
Formally, they consist of a diagram in $\Cat$ of the shape:
\[\begin{codi}[hexagonal=horizontal side 6em angle 45] 
  \obj{\dot\cU &   \cU \\ & \cC \\};
  \mor  (dot cU) ["\Sigma",swap]:-> cU u:-> cC;
  \mor[swap] (dot cU) \dot u:-> cC;
  \mor[swap] cU \Delta:[bend right,->] (dot cU);
  \mor Sigma [shorten=0.3em, |-] Delta;
\end{codi}\]
where the triangle commutes, and $u, \dot u$ are discrete fibrations. As with comprehension categories and categories
with attributes, this is clearly describable in the framework of enhanced limit 2-sketeches, and so we can freely
generated a logic $\NM$ whose models in $\Cat$ are natural models.

\begin{proposition}
  The logics $\NM$ and $\Attr$ are 2-equivalent as 2-categories.
\end{proposition}
\begin{proof}
  We first construct the $\cF$-functor $F : \Attr \to \NM$, for which it suffices to construct
  a model of $\Attr$ inside $\NM$. Assuming the fibration of types should stay the same,
  this means we must find a morphism $\chi : \cU \to \cC^\to$ such that $\cod_\cC\chi = 
  u$, which by the universal property of $\cC^\to$ is equivalent to finding parallel
  morphisms $\chi_1,\chi_2 : \cU \to \cC$ and a 2-cell $\phi : \chi_1 \to \chi_2$, such
  that $\chi_2 = u$. Let $\epsilon : \Sigma\Delta \to 1_\cU$ denote the unit of the
  adjunction $\Sigma \dashv \Delta$. Then taking $\chi_1 = u\Sigma\Delta$ and
  $\phi = u\epsilon : u\Sigma\Delta \to 1_\cU$, we have the desired universal map
  $\chi : \cU \to \cC^\to$, which gives us a model of $\Attr$ inside $\NM$. 

  In the other direction we require a $\cF$-functor $G : \NM \to \Attr$, so we construct a
  model of $\NM$ inside $\Attr$. Again we keep the fibration of types the same, so it remains
  to find a fibration $\dot u : \dot \cU \to \cC$ and an adjunction $\Sigma \dashv \Delta : \cU
  \to \dot\cU$. Let $S$ denote the walking section $S = \set{\sigma : s \mathrel{\substack{\leftarrow\\[-1em]
\rightarrow}} t : \tau}$.
\end{proof}

\section{Inductive Types}

\section{Multimode and Modal type theories}

\ifSubfilesClassLoaded{\printbibliography}{}
\end{document}
